var TenantModule,__extends,app;(function(n){var t=function(){function n(n,t,i,r){var u=this;this.$http=n;this.$cacheFactory=t;this.$q=i;this.baseUri=r;this.add=function(n){var t=u.$q.defer();return u.$http({method:"POST",url:u.baseUri+"add",data:n.entity}).then(function(n){t.resolve(n)}).catch(function(n){t.reject(n)}),t.promise};this.update=function(n){var t=u.$q.defer();return u.$http({method:"POST",url:u.baseUri+"add",data:n.entity}).then(function(n){t.resolve(n)}).catch(function(n){t.reject(n)}),t.promise};this.getById=function(n){var t=u.$q.defer();return u.$http({method:"GET",url:u.baseUri+"getbyid?id="+n}).then(function(n){t.resolve(n)}).catch(function(n){t.reject(n)}),t.promise};this.getAll=function(){var n=u.$q.defer();return u.$http({method:"GET",url:u.baseUri+"getAll"}).then(function(t){n.resolve(t.data)}).catch(function(t){n.reject(t)}),n.promise};this.remove=function(n){var t=u.$q.defer();return u.$http({method:"DELETE",url:u.baseUri+"remove?id="+n}).then(function(n){t.resolve(n)}).catch(function(n){t.reject(n)}),t.promise};this.deleteFromCache=function(){}}return n.prototype.fromCacheOrService=function(n,t){var i=this.$q.defer(),r=this.$cacheFactory.get(t);return r?i.resolve(r):this.$http({method:"GET",url:this.baseUri+"getAll"}).then(function(n){i.resolve(n.data)}).catch(function(n){i.reject(n)}),i.promise},n}();n.BaseDataService=t})(app||(app={})),function(n){var t;(function(){angular.module("app.account",["app.configuration","app.common","app.core","app.session","ngRoute"])})(t=n.account||(n.account={}))}(app||(app={})),function(n){var t;(function(){"use strict";var n=function(){function n(n,t){var i=this;this.$location=n;this.accountService=t;this.restrict="E";this.replace=!0;this.scope={};this.templateUrl="/app/account/components/accountEditor/accountEditor.html";this.link=function(n){n.vm={};n.vm.entity=n.entity;n.tryToSave=function(){return n.vm.entity.id?i.accountService.update({entity:n.vm.entity}).then(function(){i.$location.path("/account/list")}):i.accountService.add({entity:n.vm.entity}).then(function(){i.$location.path("/account/list")})}}}return n}();angular.module("app.account").directive("accountEditor",["$location","accountService",function(t,i){return new n(t,i)}])})(t=n.account||(n.account={}))}(app||(app={})),function(n){var t;(function(){"use strict";var n=function(){function n(n){var t=this;this.accountService=n;this.restrict="E";this.replace=!0;this.scope={};this.templateUrl="/app/account/components/accountList/accountList.html";this.link=function(n){return n.vm={},n.vm.remove=function(i){return t.accountService.remove({id:i.id}).then(function(){for(var t=0;t<n.vm.entities.length;t++)n.vm.entities[t].id==i.id&&n.vm.entities.splice(t,1)}).catch(function(){})},t.accountService.getAll().then(function(t){return n.vm.entities=t})}}return n}();angular.module("app.account").directive("accountList",["accountService",function(t){return new n(t)}])})(t=n.account||(n.account={}))}(app||(app={}));__extends=this.__extends||function(n,t){function r(){this.constructor=n}for(var i in t)t.hasOwnProperty(i)&&(n[i]=t[i]);r.prototype=t.prototype;n.prototype=new r},function(n){var t;(function(t){"use strict";var i=function(n){function t(t,i,r,u){n.call(this,t,i,r,u.baseUrl+"account/");this.$http=t;this.$cacheFactory=i;this.$q=r;this.apiEndpoint=u}return __extends(t,n),t}(n.BaseDataService);t.AccountService=i;angular.module("app.account").service("accountService",["$q","$cacheFactory","$http","apiEndpoint",i])})(t=n.account||(n.account={}))}(app||(app={})),function(n){var t;(function(){var n=angular.module("app.common",["app.configuration","app.core","app.session"])})(t=n.common||(n.common={}))}(app||(app={})),function(n){var t;(function(){"use strict";var n=function(){function n(){this.restrict="E";this.replace=!0;this.scope={alert:"="};this.templateUrl="/app/common/components/alertItem/alertItem.html";this.link=function(n){n.removeAlert=function(n){this.alerting.removeAlert(n)}}}return n}();angular.module("app.common").directive("alertItem",[function(){return new n}])})(t=n.common||(n.common={}))}(app||(app={})),function(n){var t;(function(){"use strict";var n=function(){function n(n){var t=this;this.alerting=n;this.restrict="E";this.replace=!0;this.scope={};this.templateUrl="/app/common/components/alerts/alerts.html";this.link=function(n){n.removeAlert=function(n){this.alerting.removeAlert(n)};n.currentAlerts=t.alerting.currentAlerts}}return n}();angular.module("app.common").directive("alerts",["alerting",function(t){return new n(t)}])})(t=n.common||(n.common={}))}(app||(app={})),function(n){var t;(function(){"use strict";var n=function(){function n(){this.$inject=[];this.restrict="E";this.replace=!0;this.scope={};this.templateUrl="/app/common/components/entityAdminMenu/entityAdminMenu.html";this.link=function(n,t,i){n.entityNameLowerCase=i.entityName.toLowerCase().replace(" ","");n.entityName=i.entityName;n.entityNamePluralized=i.entityNamePluralized}}return n.componentId="entityAdminMenu",n}();angular.module("app.common").directive(n.componentId,function(){return new n})})(t=n.common||(n.common={}))}(app||(app={})),function(n){var t;(function(){var n=function(){function n(n){var t=this;this.session=n;this.templateUrl="/app/common/components/identityMenu/identityMenu.html";this.restrict="E";this.replace=!0;this.scope={};this.link=function(n){n.session=t.session}}return n}();angular.module("app.common").directive("identityMenu",["session",function(t){return new n(t)}])})(t=n.common||(n.common={}))}(app||(app={})),function(n){var t;(function(){var n=function(){function n(){this.restrict="E";this.replace=!0;this.templateUrl="/app/common/components/multiEntitySelect/multiEntitySelect.html";this.scope={parentEntities:"=",entityService:"="};this.link=function(n,t,i){return n.parentEntities=n.parentEntities||[],n.entityNamePlural=i.entityNamePlural,n.$watch("selectedId",function(){n.processSelectedIdChange();n.selectedId=null}),n.processSelectedIdChange=function(){var t;if(n.selectedId){for(t=0;t<n.parentEntities.length;t++)if(n.parentEntities[t].id==n.selectedId){n.parentEntities.splice(t,1);return}for(t=0;t<n.vm.entities.length;t++)n.vm.entities[t].id==n.selectedId&&n.parentEntities.push(n.vm.entities[t])}},n.entityService.getAll().then(function(t){n.vm={entities:t}})}}return n}();angular.module("app.common").directive("multiEntitySelect",[function(){return new n}])})(t=n.common||(n.common={}))}(app||(app={})),function(n){var t;(function(){"use strict";var n=function(){function n(n){this.requestCounter=n;this.restrict="E";this.scope={};this.template="<div ng-show='requestCount' class='work-spinner'><i class='fa fa-spinner fa-spin fade'><\/i><\/div>";this.link=function(){}}return n}();angular.module("app.common").directive("workSpinner",["$rootScope","requestCounter",function(t){return new n(t)}])})(t=n.common||(n.common={}))}(app||(app={})),function(n){var t;(function(){var n=function(){function n(n){var t=this;this.$timeout=n;this.alertTypes=["warning","info","danger","success"];this.currentAlerts=[];this.addWarning=function(n){t.addAlert("warning",n)};this.addInfo=function(n){t.addAlert("info",n)};this.addDanger=function(n){t.addAlert("danger",n)};this.addSuccess=function(n){t.addAlert("success",n)};this.errorHandler=function(n){return function(){t.addDanger(n)}};this.removeAlert=function(n){for(var i=0;i<t.currentAlerts.length;i++)if(t.currentAlerts[i]==n){t.currentAlerts.splice(i,1);break}};this.addAlert=function(n,i){var r={type:n,message:i};t.currentAlerts.push(r);t.$timeout(function(){t.removeAlert(r)},1e4)}}return n}();angular.module("app.common").factory("alerting",["$timeout",function(t){return new n(t)}])})(t=n.common||(n.common={}))}(app||(app={})),function(n){var t;(function(){angular.module("app.common").config(function(n){n.decorator("$exceptionHandler",function(n,t){return function(i,r){n(i,r);var u=t.get("alerting");u.addDanger(i.message)}})})})(t=n.common||(n.common={}))}(app||(app={})),function(n){var t;(function(){var n=angular.module("app.configuration",[])})(t=n.configuration||(n.configuration={}))}(app||(app={})),function(n){var t;(function(n){var t=function(){function n(n,t,i){this.$http=n;this.$q=t;this.$rootScope=i;this.baseUri="api/configuration/"}return n.prototype.get=function(){var t=this,n=this.$q.defer();return this.$http({method:"GET",url:this.baseUri+"get"}).then(function(i){n.resolve(t.$rootScope.configuration=i.data)}).catch(function(t){n.reject(t)}),n.promise},n}();n.ConfigurationService=t;angular.module("app.configuration").service("configurationService",["$http","$q","$rootScope",t])})(t=n.configuration||(n.configuration={}))}(app||(app={})),function(n){var t;(function(){function n(n){n.interceptors.push("authorizationInterceptor");n.interceptors.push("requestCounter")}function t(n,t,i,r,u,f,e){i.$on("$routeChangeStart",function(n,r){i.inViewTransition=!0;r.originalPath=="/signin"&&e.set({data:null});r.$$route&&r.$$route.authorizationRequired&&e.get()==null&&i.$evalAsync(function(){t.path("/signin")})});i.$on("$viewContentLoaded",function(){i.inViewTransition=!1;r.current.$$route.authorizationRequired&&(f.get()==null||f.get()=="")&&t.path("/signin")})}var i=angular.module("app.core",["app.configuration","app.session"]).config(n).run(t);n.$inject=["$httpProvider"];t.$inject=["$http","$location","$rootScope","$route","$templateCache","currentUser","token"]})(t=n.core||(n.core={}))}(app||(app={})),function(n){var t;(function(){"use strict";function n(n,t,i){var r=this;return r.request=function(n){return i.get()&&(n.headers.Authorization="Bearer "+i.get()),n},r}n.$inject=["$q","$rootScope","token"];angular.module("app.core").factory("authorizationInterceptor",n)})(t=n.core||(n.core={}))}(app||(app={})),function(n){var t;(function(){"use strict";function n(n){var t=0,i=function(i){return t+=1,n.when(i)},r=function(i){return t-=1,n.reject(i)},u=function(i){return t-=1,n.when(i)},f=function(i){return t-=1,n.reject(i)},e=function(){return t};return{request:i,response:u,requestError:r,responseError:f,getRequestCount:e}}angular.module("app.core").factory("requestCounter",["$q",n])})(t=n.core||(n.core={}))}(app||(app={})),function(n){var t;(function(){angular.module("app.core").value("$",$)})(t=n.core||(n.core={}))}(app||(app={})),function(n){var t;(function(){var n=function(){function n(){this.config={baseUrl:"/api/"}}return n.prototype.configure=function(n){this.config={baseUrl:n}},n.prototype.$get=function(){return this.config},n}();angular.module("app.core").provider("apiEndpoint",n)})(t=n.core||(n.core={}))}(app||(app={})),function(){"use strict";function n(){var n="ngSecurityStorage";return{get:function(){return JSON.parse(localStorage.getItem(n)||"[]")},getByName:function(t){for(var r=JSON.parse(localStorage.getItem(n)||"[]"),i=0;i<r.length;i++)if(t.name===r[i].name)return r[i];return null},put:function(t){for(var i=JSON.parse(localStorage.getItem(n)||"[]"),r=0;r<i.length;r++)if(t.name===i[r].name){i[r].value=t.value;localStorage.setItem(n,JSON.stringify(i));return}i.push(t);localStorage.setItem(n,JSON.stringify(i))}}}angular.module("app.core").factory("storage",[n])}(),function(){"use strict";function n(n,t){var r=this,i=null,u="configuration";return r.get=function(){if(i)return i;try{i=t.getByName({name:u}).value}catch(n){}return i},r.set=function(n){i=n.data;t.put({name:u,value:n.data})},n.$on("$routeChangeStart",function(n,t){t.originalPath=="/signin"&&(i=null,r.set({data:null}))}),r}angular.module("app.core").service("configuration",["$rootScope","storage",n])}(),function(n){var t;(function(){var n=function(){return function(n){var t=[];for(var i in n)t.push(encodeURIComponent(i)+"="+encodeURIComponent(n[i]));return t.join("&").replace(/%20/g,"+")}};angular.module("app.core").factory("formEncode",n)})(t=n.common||(n.common={}))}(app||(app={})),function(n){var t;(function(){"use strict";function n(n){var t=new XMLHttpRequest,i=null;return t.onreadystatechange=function(){t.readyState==4&&t.status==200&&(i=t.responseText)},t.open("GET",n,!1),t.send(null),i}angular.module("app.core").value("getStringFromUrl",n)})(t=n.core||(n.core={}))}(app||(app={})),function(n){var t;(function(){function n(n){n.when("/group/add",{templateUrl:""});n.when("/group/list",{templateUrl:""})}angular.module("app.group",["app.configuration","app.common","app.core","app.session","ngRoute"]).config(n);n.$inject=["$routeProvider"]})(t=n.group||(n.group={}))}(app||(app={})),function(n){var t;(function(){var n=function(){function n(n,t){var i=this;this.$location=n;this.groupService=t;this.replace=!0;this.restrict="E";this.templateUrl="/app/group/components/groupEditor/groupEditor.html";this.scope={entity:"="};this.link=function(n){n.vm={};n.vm.entity=n.entity;n.tryToSave=function(){return n.vm.entity.id?i.groupService.update({entity:n.vm.entity}).then(function(){i.$location.path("/group/list")}):i.groupService.add({entity:n.vm.entity}).then(function(){i.$location.path("/group/list")})}};this.$inject=["$location","groupService"]}return n.componentId="groupEditor",n}();angular.module("app.group").directive(n.componentId,function(t,i){return new n(t,i)})})(t=n.group||(n.group={}))}(app||(app={})),function(n){var t;(function(){var n=function(){function n(n){var t=this;this.groupService=n;this.replace=!0;this.restrict="E";this.templateUrl="/app/group/components/groupList/groupList.html";this.scope={};this.link=function(n){return n.vm={},n.vm.remove=function(i){return t.groupService.remove({id:i.id}).then(function(){for(var t=0;t<n.vm.entities.length;t++)n.vm.entities[t].id==i.id&&n.vm.entities.splice(t,1)}).catch(function(){})},t.groupService.getAll().then(function(t){return n.vm.entities=t})};this.$inject=["groupService"]}return n.componentId="groupList",n}();angular.module("app.group").directive(n.componentId,function(t){return new n(t)})})(t=n.group||(n.group={}))}(app||(app={}));__extends=this.__extends||function(n,t){function r(){this.constructor=n}for(var i in t)t.hasOwnProperty(i)&&(n[i]=t[i]);r.prototype=t.prototype;n.prototype=new r},function(n){var t;(function(t){var i=function(n){function t(t,i,r,u){n.call(this,t,i,r,u.baseUrl+"group/");this.$http=t;this.$cacheFactory=i;this.$q=r;this.apiEndpoint=u}return __extends(t,n),t}(n.BaseDataService);t.GroupService=i;angular.module("app.group").service("groupService",["$q","$cacheFactory","$http","apiEndpoint",i])})(t=n.group||(n.group={}))}(app||(app={})),function(n){var t;(function(){function n(n){n.when("/profile/add",{templateUrl:""});n.when("/profile/list",{templateUrl:""})}angular.module("app.profile",["app.configuration","app.common","app.core","app.session","ngRoute"]).config(n);n.$inject=["$routeProvider"]})(t=n.profile||(n.profile={}))}(app||(app={})),function(n){var t;(function(){"use strict";var n=function(){function n(n,t){var i=this;this.$location=n;this.profileService=t;this.$inject=["$location","profileService"];this.restrict="E";this.replace=!0;this.scope={};this.templateUrl="/app/profile/components/profileEditor/profileEditor.html";this.link=function(n){n.vm={};n.vm.entity=n.entity;n.tryToSave=function(){return n.vm.entity.id?i.profileService.update({entity:n.vm.entity}).then(function(){i.$location.path("/profile/list")}):i.profileService.add({entity:n.vm.entity}).then(function(){i.$location.path("/profile/list")})}}}return n.componentId="profileEditor",n}();angular.module("app.profile").directive(n.componentId,function(t,i){return new n(t,i)})})(t=n.profile||(n.profile={}))}(app||(app={})),function(n){var t;(function(){"use strict";var n=function(){function n(n){var t=this;this.profileService=n;this.$inject=["profileService"];this.restrict="E";this.replace=!0;this.scope={};this.templateUrl="/app/profile/components/profileList/profileList.html";this.link=function(n){return n.vm={},n.vm.remove=function(i){return t.profileService.remove({id:i.id}).then(function(){for(var t=0;t<n.vm.entities.length;t++)n.vm.entities[t].id==i.id&&n.vm.entities.splice(t,1)}).catch(function(){})},t.profileService.getAll().then(function(t){return n.vm.entities=t})}}return n.componentId="profileList",n}();angular.module("app.profile").directive(n.componentId,function(t){return new n(t)})})(t=n.profile||(n.profile={}))}(app||(app={}));__extends=this.__extends||function(n,t){function r(){this.constructor=n}for(var i in t)t.hasOwnProperty(i)&&(n[i]=t[i]);r.prototype=t.prototype;n.prototype=new r},function(n){var t;(function(t){var i=function(n){function t(t,i,r,u){n.call(this,t,i,r,u.baseUrl+"profile/");this.$http=t;this.$cacheFactory=i;this.$q=r;this.apiEndpoint=u}return __extends(t,n),t}(n.BaseDataService);t.ProfileService=i;angular.module("app.profile").service("profileService",["$q","$cacheFactory","$http","apiEndpoint",i])})(t=n.profile||(n.profile={}))}(app||(app={})),function(n){var t;(function(){function n(n){n.when("/role/add",{templateUrl:""});n.when("/role/list",{templateUrl:""})}angular.module("app.role",["app.configuration","app.common","app.core","app.session","ngRoute"]).config(n);n.$inject=["$routeProvider"]})(t=n.role||(n.role={}))}(app||(app={})),function(n){var t;(function(){var n=function(){function n(n,t){var i=this;this.$location=n;this.roleService=t;this.replace=!0;this.restrict="E";this.templateUrl="/app/role/components/roleEditor/roleEditor.html";this.scope={entity:"="};this.link=function(n){n.vm={};n.vm.entity=n.entity;n.tryToSave=function(){return n.vm.entity.id?i.roleService.update({entity:n.vm.entity}).then(function(){i.$location.path("/role/list")}):i.roleService.add({entity:n.vm.entity}).then(function(){i.$location.path("/role/list")})}};this.$inject=["$location","roleService"]}return n.componentId="roleEditor",n}();angular.module("app.role").directive(n.componentId,function(t,i){return new n(t,i)})})(t=n.role||(n.role={}))}(app||(app={})),function(n){var t;(function(){var n=function(){function n(n){var t=this;this.roleService=n;this.replace=!0;this.restrict="E";this.templateUrl="/app/role/components/roleList/roleList.html";this.scope={};this.link=function(n){return n.vm={},n.vm.remove=function(i){return t.roleService.remove({id:i.id}).then(function(){for(var t=0;t<n.vm.entities.length;t++)n.vm.entities[t].id==i.id&&n.vm.entities.splice(t,1)}).catch(function(){})},t.roleService.getAll().then(function(t){return n.vm.entities=t})};this.$inject=["roleService"]}return n.componentId="roleList",n}();angular.module("app.role").directive(n.componentId,function(t){return new n(t)})})(t=n.role||(n.role={}))}(app||(app={}));__extends=this.__extends||function(n,t){function r(){this.constructor=n}for(var i in t)t.hasOwnProperty(i)&&(n[i]=t[i]);r.prototype=t.prototype;n.prototype=new r},function(n){var t;(function(t){var i=function(n){function t(t,i,r,u){n.call(this,t,i,r,u.baseUrl+"role/");this.$http=t;this.$cacheFactory=i;this.$q=r;this.apiEndpoint=u}return __extends(t,n),t}(n.BaseDataService);t.RoleService=i;angular.module("app.role").service("roleService",["$q","$cacheFactory","$http","apiEndpoint",i])})(t=n.role||(n.role={}))}(app||(app={})),function(n){var t;(function(){function n(n,t){t.configure("/api/");n.when("/",{templateUrl:"/app/security/templates/splash.html",resolve:{routeData:["securityRouteResolver",function(n){return n.resolveRoute()}]},authorizationRequired:!0,caseInsensitiveMatch:!0});n.when("/signin",{templateUrl:"app/security/templates/signin.html",resolve:{routeData:["securityRouteResolver",function(n){return n.resolveRoute()}]},authorizationRequired:!1,caseInsensitiveMatch:!0});n.when("/security",{templateUrl:"app/security/templates/security.html",resolve:{routeData:["securityRouteResolver",function(n){return n.resolveRoute()}]},authorizationRequired:!0,caseInsensitiveMatch:!0});n.when("/role/add",{templateUrl:"/app/security/templates/addrole.html",resolve:{routeData:["securityRouteResolver",function(n){return n.resolveRoute()}]},authorizationRequired:!0,caseInsensitiveMatch:!0});n.when("/role/edit/:roleid",{templateUrl:"/app/security/templates/addrole.html",resolve:{routeData:["securityRouteResolver",function(n){return n.resolveRoute()}]},authorizationRequired:!0,caseInsensitiveMatch:!0});n.when("/role/list",{templateUrl:"/app/security/templates/roles.html",resolve:{routeData:["securityRouteResolver",function(n){return n.resolveRoute()}]},authorizationRequired:!0,caseInsensitiveMatch:!0});n.when("/account/add",{templateUrl:"/app/security/templates/addaccount.html",resolve:{routeData:["securityRouteResolver",function(n){return n.resolveRoute()}]},authorizationRequired:!0,caseInsensitiveMatch:!0});n.when("/account/edit/:accountid",{templateUrl:"/app/security/templates/addaccount.html",resolve:{routeData:["securityRouteResolver",function(n){return n.resolveRoute()}]},authorizationRequired:!0,caseInsensitiveMatch:!0});n.when("/account/list",{templateUrl:"/app/security/templates/accounts.html",resolve:{routeData:["securityRouteResolver",function(n){return n.resolveRoute()}]},authorizationRequired:!0,caseInsensitiveMatch:!0});n.when("/profile/add",{templateUrl:"/app/security/templates/addprofile.html",resolve:{routeData:["securityRouteResolver",function(n){return n.resolveRoute()}]},authorizationRequired:!0,caseInsensitiveMatch:!0});n.when("/profile/edit/:profileid",{templateUrl:"/app/security/templates/addprofile.html",resolve:{routeData:["securityRouteResolver",function(n){return n.resolveRoute()}]},authorizationRequired:!0,caseInsensitiveMatch:!0});n.when("/profile/list",{templateUrl:"/app/security/templates/profiles.html",resolve:{routeData:["securityRouteResolver",function(n){return n.resolveRoute()}]},authorizationRequired:!0,caseInsensitiveMatch:!0});n.when("/tenant/add",{templateUrl:"/app/security/templates/addtenant.html",resolve:{routeData:["securityRouteResolver",function(n){return n.resolveRoute()}]},authorizationRequired:!0,caseInsensitiveMatch:!0});n.when("/tenant/edit/:tenantid",{templateUrl:"/app/security/templates/addtenant.html",resolve:{routeData:["securityRouteResolver",function(n){return n.resolveRoute()}]},authorizationRequired:!0,caseInsensitiveMatch:!0});n.when("/tenant/list",{templateUrl:"/app/security/templates/tenants.html",resolve:{routeData:["securityRouteResolver",function(n){return n.resolveRoute()}]},authorizationRequired:!0,caseInsensitiveMatch:!0});n.when("/user/changepassword/:changepasswordid",{templateUrl:"/app/security/templates/changepassword.html",resolve:{routeData:["securityRouteResolver",function(n){return n.resolveRoute()}]},authorizationRequired:!0,caseInsensitiveMatch:!0});n.when("/user/add",{templateUrl:"/app/security/templates/adduser.html",resolve:{routeData:["securityRouteResolver",function(n){return n.resolveRoute()}]},authorizationRequired:!0,caseInsensitiveMatch:!0});n.when("/user/edit/:userid",{templateUrl:"/app/security/templates/adduser.html",resolve:{routeData:["securityRouteResolver",function(n){return n.resolveRoute()}]},authorizationRequired:!0,caseInsensitiveMatch:!0});n.when("/user/list",{templateUrl:"/app/security/templates/users.html",resolve:{routeData:["securityRouteResolver",function(n){return n.resolveRoute()}]},authorizationRequired:!0,caseInsensitiveMatch:!0});n.when("/group/add",{templateUrl:"/app/security/templates/addgroup.html",resolve:{routeData:["securityRouteResolver",function(n){return n.resolveRoute()}]},authorizationRequired:!0,caseInsensitiveMatch:!0});n.when("/group/edit/:groupid",{templateUrl:"/app/security/templates/addgroup.html",resolve:{routeData:["securityRouteResolver",function(n){return n.resolveRoute()}]},authorizationRequired:!0,caseInsensitiveMatch:!0});n.when("/group/list",{templateUrl:"/app/security/templates/groups.html",resolve:{routeData:["securityRouteResolver",function(n){return n.resolveRoute()}]},authorizationRequired:!0,caseInsensitiveMatch:!0});n.otherwise("/")}angular.module("app.security",["app.account","app.configuration","app.common","app.core","app.group","app.profile","app.role","app.session","app.tenant","app.user","ngRoute"]).config(["$routeProvider","apiEndpointProvider",n])})(t=n.security||(n.security={}))}(app||(app={})),function(n){var t;(function(){var n=function(){function n(){this.restrict="E";this.replace=!0;this.templateUrl="/app/security/components/securityMenu/securityMenu.html";this.scope={};this.link=function(){}}return n.componentId="securityMenu",n}();angular.module("app.security").directive(n.componentId,function(){return new n})})(t=n.security||(n.security={}))}(app||(app={})),function(n){var t;(function(){var n=function(){function n(n,t,i){var r=this;this.$location=n;this.$routeParams=t;this.securityUow=i;this.replace=!0;this.restrict="E";this.templateUrl="/app/security/components/userEditor/userEditor.html";this.scope={};this.link=function(n){return n.vm={},n.uow={roles:r.securityUow.roles,groups:r.securityUow.groups},n.tryToSave=function(){return n.vm.entity.id?r.securityUow.users.update({model:n.vm.entity}).then(function(){r.$location.path("/user/list")}):r.securityUow.users.add({model:n.vm.entity}).then(function(){r.$location.path("/user/list")})},r.$routeParams.userid?r.securityUow.users.getById({id:r.$routeParams.userid}).then(function(t){n.vm.entity=t}).catch(function(){}):void 0}}return n}();angular.module("app.security").directive("userEditor",["$location","$routeParams","securityUow",function(t,i,r){return new n(t,i,r)}])})(t=n.security||(n.security={}))}(app||(app={})),function(n){var t;(function(){var n=function(){function n(n,t,i,r){this.groupService=n;this.identityService=t;this.roleService=i;this.userService=r;this.identity=this.identityService;this.groups=this.groupService;this.roles=this.roleService;this.users=this.userService}return n}();angular.module("app.security").service("securityUow",["groupService","identityService","roleService","userService",n])})(t=n.security||(n.security={}))}(app||(app={})),function(n){var t;(function(){var n=function(){function n(n,t,i,r){var u=this;this.configurationService=n;this.securityUow=t;this.$q=i;this.$route=r;this.resolveRoute=function(){return u.configurationService.get().then(function(){return u.securityUow.identity.getCurrentUser().then(function(){return u.$route.current.params.userid?u.$q.all([u.securityUow.roles.getAll(),u.securityUow.groups.getAll(),u.securityUow.users.getById({id:u.$route.current.params.userid})]).then(function(n){return n}):u.$route.current.params.roleid?u.$q.all([u.securityUow.roles.getById({id:u.$route.current.params.roleid})]).then(function(n){return n}):u.$route.current.params.groupid?u.$q.all([u.securityUow.groups.getById({id:u.$route.current.params.groupid})]).then(function(n){return n}):!0})})}}return n.serviceId="securityRouteResolver",n}();angular.module("app.security").service(n.serviceId,function(t,i,r,u){return new n(t,i,r,u)})})(t=n.security||(n.security={}))}(app||(app={})),function(n){var t;(function(){angular.module("app.session",["app.configuration","app.common","app.core"])})(t=n.session||(n.session={}))}(app||(app={})),function(n){var t;(function(n){function i(n,t,i,r,u,f,e){var o=this;return o.isLoggedIn=function(){if(o.getCurrentUser()!=null&&o.getCurrentUser()!="")return o.getCurrentUser().username},o.isUserInRole=function(n){var i,t;if(o.isLoggedIn())for(i=o.getCurrentUser(),t=0;t<i.roles.length;t++)if(n==i.roles[t].name)return!0;return!1},o.getCurrentUser=function(){return f.get()},o.signOut=function(){t({method:"GET",url:"api/identity/signout"}).then(function(){});e.set({data:null});f.set({data:null});n.path("/")},o.setConfigurationAsync=function(){return r.get()?i.when(r.get()):u.get().then(function(n){return r.set({data:n}),r.get()})},o.getConfiguration=function(){return r.get()},o}var t;angular.module("app.session").service("session",["$location","$http","$q","configuration","configurationService","currentUser","token",i]);t=function(){function n(n,t,i,r,u,f,e){this.$location=n;this.$http=t;this.$q=i;this.configuration=r;this.configurationService=u;this.currentUser=f;this.token=e;this.isLoggedIn=function(){return!0};this.isUserInRole=function(){return!0};this.getCurrentUser=function(){return{}};this.signOut=function(){};this.setConfigurationAsync=function(){};this.getConfiguration=function(){return{}}}return n.ServiceId="session",n}();n.Session=t})(t=n.session||(n.session={}))}(app||(app={})),function(n){var t;(function(){"use strict";function n(n,t){var r=this,i=null,u="configuration";return r.get=function(){if(i)return i;try{i=t.getByName({name:u}).value}catch(n){}return i},r.set=function(n){i=n.data;t.put({name:u,value:n.data})},n.$on("$routeChangeStart",function(n,t){t.originalPath=="/signin"&&(i=null,r.set({data:null}))}),r}angular.module("app.session").service("configuration",["$rootScope","storage",n])})(t=n.session||(n.session={}))}(app||(app={})),function(n){var t;(function(){angular.module("app.session").service("currentUser",function(t,i){return new n(t,i)});var n=function(){function n(n,t){var i=this;this.$rootScope=n;this.storage=t;this.name="currentUser";this.get=function(){if(i.data)return i.data;try{i.data=i.storage.getByName({name:name}).value}catch(n){}return i.data};this.set=function(n){i.data=n.data;i.storage.put({name:name,value:n.data})};n.$on("$routeChangeStart",function(n,t){t.originalPath=="/signin"&&(i.data=null,i.set({data:null}))})}return n.$inject=["$rootScope","storage"],n}()})(t=n.session||(n.session={}))}(app||(app={})),function(n){var t;(function(){function n(n,t){var r=this,i=null,u="token";return r.get=function(){if(i)return i;try{i=t.getByName({name:u}).value}catch(n){}return i},r.set=function(n){i=n.data;t.put({name:u,value:n.data})},n.$on("$routeChangeStart",function(n,t){t.originalPath=="/signin"&&(i=null,r.set({data:null}))}),r}angular.module("app.session").service("token",["$rootScope","storage",n])})(t=n.session||(n.session={}))}(app||(app={})),function(n){var t;(function(){function n(n){n.when("/tenant/add",{templateUrl:""});n.when("/tenant/list",{templateUrl:""})}angular.module("app.tenant",["app.configuration","app.common","app.core","app.session","ngRoute"]).config(n);n.$inject=["$routeProvider"]})(t=n.tenant||(n.tenant={}))}(app||(app={})),function(){"use strict";var n=function(){function n(n,t){var i=this;this.$location=n;this.tenantService=t;this.$inject=["$location","tenantService"];this.restrict="E";this.replace=!0;this.scope={};this.templateUrl="/app/tenant/components/tenantEditor/tenantEditor.html";this.link=function(n){n.vm={};n.vm.entity=n.entity;n.tryToSave=function(){return n.vm.entity.id?i.tenantService.update({entity:n.vm.entity}).then(function(){i.$location.path("/tenant/list")}):i.tenantService.add({entity:n.vm.entity}).then(function(){i.$location.path("/tenant/list")})}}}return n.componentId="tenantEditor",n}();angular.module("app.tenant").directive(n.componentId,function(t,i){return new n(t,i)})}(TenantModule||(TenantModule={})),function(){"use strict";var n=function(){function n(n){var t=this;this.tenantService=n;this.$inject=["tenantService"];this.restrict="E";this.replace=!0;this.scope={};this.templateUrl="/app/tenant/components/tenantList/tenantList.html";this.link=function(n){return n.vm={},n.vm.remove=function(i){return t.tenantService.remove({id:i.id}).then(function(){for(var t=0;t<n.vm.entities.length;t++)n.vm.entities[t].id==i.id&&n.vm.entities.splice(t,1)}).catch(function(){})},t.tenantService.getAll().then(function(t){return n.vm.entities=t})}}return n.componentId="tenantList",n}();angular.module("app.tenant").directive(n.componentId,function(t){return new n(t)})}(TenantModule||(TenantModule={}));__extends=this.__extends||function(n,t){function r(){this.constructor=n}for(var i in t)t.hasOwnProperty(i)&&(n[i]=t[i]);r.prototype=t.prototype;n.prototype=new r},function(n){var t;(function(t){var i=function(n){function t(t,i,r,u){n.call(this,t,i,r,u.baseUrl+"tenant/");this.$http=t;this.$cacheFactory=i;this.$q=r;this.apiEndpoint=u}return __extends(t,n),t}(n.BaseDataService);t.TenantService=i;angular.module("app.tenant").service("tenantService",["$q","$cacheFactory","$http","apiEndpoint",i])})(t=n.tenant||(n.tenant={}))}(app||(app={})),function(n){var t;(function(){function n(n){n.when("/signin",{templateUrl:"/app/user/templates/signin.html"}).when("/",{templateUrl:"/app/user/templates/preferences.html",controller:"preferencesController",controllerAs:"vm",resolve:{preferencesData:["preferencesService",function(n){return n.getClientPreferences()}],routeData:["userRouteResolver",function(n){return n.resolveRoute()}]},authorizationRequired:!1}).when("/user/add",{templateUrl:"/app/user/templates/edit.html",resolve:{routeData:["userRouteResolver",function(n){return n.resolveRoute()}]},authorizationRequired:!0}).when("/admin/user/edit/:id",{templateUrl:"/app/user/templates/edit.html",resolve:["userRouteResolver",function(n){return n.resolveRoute({route:"/admin/user/edit/:id"})}],authorizationRequired:!0}).when("/admin/users",{templateUrl:"/app/user/templates/list.html",resolve:["userRouteResolver",function(n){return n.resolveRoute({route:"/admin/users"})}],authorizationRequired:!0}).when("/register",{templateUrl:"/app/user/templates/register.html",resolve:{routeData:["userRouteResolver",function(n){return n.resolveRoute()}]},authorizationRequired:!1}).when("/preferences",{templateUrl:"/app/user/templates/preferences.html",controller:"preferencesController",controllerAs:"vm",resolve:{routeData:["userRouteResolver",function(n){return n.resolveRoute()}]},authorizationRequired:!0})}var t=angular.module("app.user",["app.configuration","app.common","app.core","app.group","app.role","app.session","ngRoute"]).config(n);n.$inject=["$routeProvider"]})(t=n.user||(n.user={}))}(app||(app={})),function(n){var t;(function(){"use strict";var n=function(){function n(n,t,i,r){var u=this;this.identityService=n;this.userService=t;this.$location=i;this.$routeParams=r;this.templateUrl="/app/user/components/changePasswordForm/changePasswordForm.html";this.restrict="E";this.scope={};this.replace=!0;this.link=function(n){return n.vm={},n.tryToChangePassword=function(){return u.userService.changePassword({model:n.vm}).then(function(){u.$location.path("/user/list")}).catch(function(){})},u.$routeParams.changepasswordid?u.userService.getById({id:u.$routeParams.changepasswordid}).then(function(t){n.vm=t}):u.identityService.getCurrentUser().then(function(t){n.vm=t})};this.$inject=["identityService","userService","$location","$routeParams"]}return n.componentId="changePasswordForm",n}();angular.module("app.user").directive(n.componentId,function(t,i,r,u){return new n(t,i,r,u)})})(t=n.user||(n.user={}))}(app||(app={})),function(){"use strict";function n(n,t){return{templateUrl:"/app/user/components/registrationForm/registrationForm.html",restrict:"EA",replace:!0,scope:{},link:function(i){i.submit=function(){t.register({model:i.model}).then(function(){n.path("/signin")})}}}}angular.module("app.user").directive("registrationForm",["$location","identityService",n])}(),function(n){var t;(function(){"use strict";var n=function(){function n(n,t,i){var r=this;this.identityService=n;this.token=t;this.$location=i;this.templateUrl="/app/user/components/signInForm/signInForm.html";this.restrict="E";this.scope={};this.replace=!0;this.link=function(n){n.vm={username:"System",password:"password"};n.tryToSignIn=function(){return r.identityService.signIn({model:n.vm}).then(function(n){r.token.set({data:n});r.$location.path("/")}).catch(function(){console.log("what what?")})}};this.$inject=["identityService","token","$location"]}return n.componentId="signInForm",n}();angular.module("app.user").directive(n.componentId,function(t,i,r){return new n(t,i,r)})})(t=n.user||(n.user={}))}(app||(app={})),function(){"use strict";function n(){return{templateUrl:"/app/user/components/userAdminMenu/userAdminMenu.html",restrict:"EA",replace:!0,scope:{},link:function(){}}}angular.module("app.user").directive("userAdminMenu",["$location","$routeParams","app.session",n])}(),function(n){var t;(function(n){var t=function(){function n(){this.templateUrl="/app/user/components/userDropDownList/userDropDownList.html";this.restrict="E";this.scope={currentuser:"="};this.replace=!0;this.link=function(n){n.users=[{id:0,name:"John"},{id:1,name:"Quinn"},{id:2,name:"Richard"}]}}return n.componentId="userDropDownList",n}();n.UserDropDownList=t;angular.module("app.user").directive(t.componentId,[function(){return new t}])})(t=n.user||(n.user={}))}(app||(app={})),function(n){var t;(function(){var n=function(){function n(n){var t=this;this.userService=n;this.replace=!0;this.restrict="E";this.templateUrl="/app/user/components/userList/userList.html";this.scope={};this.link=function(n){return n.vm={},n.vm.remove=function(i){return t.userService.remove({id:i.id}).then(function(){for(var t=0;t<n.vm.entities.length;t++)n.vm.entities[t].id==i.id&&n.vm.entities.splice(t,1)}).catch(function(){})},t.userService.getAll().then(function(t){return n.vm.entities=t})};this.$inject=["userService"]}return n.componentId="userList",n}();angular.module("app.user").directive(n.componentId,function(t){return new n(t)})})(t=n.user||(n.user={}))}(app||(app={})),function(n){var t;(function(){function n(n,t,i,r){var u=this;return u.signIn=function(t){var i=r({username:t.model.username,password:t.model.password,grant_type:"password"});return n.post("/login",i,{headers:{"Content-Type":"application/x-www-form-urlencoded"}}).then(function(n){return n.data.access_token}).catch(function(){})},u.register=function(t){return n({method:"POST",url:"api/identity/register",data:JSON.stringify(t.model)}).then(function(n){return n.data.token}).catch(function(){})},u.getCurrentUser=function(){return n({method:"GET",url:"api/user/getCurrentUser"}).then(function(n){return i.set({data:n.data}),i.get()}).catch(function(){})},u}angular.module("app.user").service("identityService",["$http","alerting","currentUser","formEncode",n])})(t=n.user||(n.user={}))}(app||(app={})),function(){"use strict";function n(n,t){var r=this,i=this;return this.$q=t,i.getClientPreferences=function(){var n=r.$q.defer();return n.resolve({Server:{RecentPoLimit:5},Client:{PlaceCallUse:"Skype",StartScreen:"Dashboard",PoDisplayLimit:"15",PoOrderBy:"Due Date",PoOrder:"Descending",RecentPoLimit:"5"}}),n.promise},i}n.$inject=["$http","$q","configuration"];angular.module("app.user").service("preferencesService",n)}(),function(n){var t;(function(){function n(n,t,i,r){var u=this;return u.resolveRoute=function(n){return i.get().then(function(){if(n)switch(n.route){case"/admin/users":return r.getAll().then(function(){});case"/admin/user/edit/:id":return r.getById({id:t.params.id}).then(function(){})}}).catch(function(n){console.log(n)})},u}angular.module("app.user").service("userRouteResolver",["$q","$route","configurationService","userService",n])})(t=n.user||(n.user={}))}(app||(app={})),function(n){var t;(function(){function n(n,t,i){var r=this;return r.getBaseUri=function(){return i.configuration&&i.configuration.apiVersion?"api/"+i.configuration.apiVersion+"/user/":"api/user/"},r.cache={getAll:null,getById:null},i.$on("$locationChangeStart",function(){r.clearCache()}),r.clearCache=function(){r.cache={getAll:null,getById:null}},r.getAll=function(i){if(r.cache.getAll){var u=t.defer();return u.resolve(r.cache.getAll),u.promise}return n({method:"GET",url:r.getBaseUri()+"getAll",params:i}).then(function(n){return r.cache.getAll=n.data,n.data}).catch(function(){})},r.getById=function(i){if(r.cache.getById&&r.cache.getById.id==i.id){var u=t.defer();return u.resolve(r.cache.getById),u.promise}return n({method:"GET",url:r.getBaseUri()+"getbyid?id="+i.id}).then(function(n){return r.cache.getById=n.data,n.data}).catch(function(){})},r.remove=function(t){return n({method:"DELETE",url:r.getBaseUri()+"remove?id="+t.id}).then(function(n){return r.clearCache(),n}).catch(function(){})},r.changePassword=function(t){return n({method:"POST",url:r.getBaseUri()+"changePassword",data:JSON.stringify(t.model)}).then(function(n){return r.clearCache(),n}).catch(function(){})},r.add=function(t){return n({method:"POST",url:r.getBaseUri()+"add",data:JSON.stringify(t.model)}).then(function(n){return r.clearCache(),n}).catch(function(){})},r.update=function(t){return n({method:"PUT",url:r.getBaseUri()+"update",data:JSON.stringify(t.model)}).then(function(n){return r.clearCache(),n}).catch(function(n){console.log("user service error:"+n)})},r}angular.module("app.user").service("userService",["$http","$q","$rootScope",n])})(t=n.user||(n.user={}))}(app||(app={}));
//# sourceMappingURL=app.min.js.map
